!function(){var e={38268:function(e,t,n){"use strict";n.r(t),n.d(t,{slides:function(){return i},slideContainer:function(){return o},slideImages:function(){return r},firstImage:function(){return s},currentImage:function(){return a},currentSlide:function(){return u},stage:function(){return d},progressBar:function(){return l},player:function(){return c},toolbar:function(){return w},getSlideSelectorByIndex:function(){return f},TOOLBAR_HEIGHT:function(){return _},SLIDE_MARGIN:function(){return m},NORMAL_IMAGE_WIDTH:function(){return h},FULLSCREEN_IMAGE_WIDTH:function(){return g}});const i=$("#new-player .slide"),o=$("#slide-container"),r=$("#new-player .slide-image"),s=r.first(),a=$("#new-player .slide.current .slide-image"),u=$("#new-player #current-slide"),d=$("#new-player #stage"),l=$("#progress-bar "),c=$("#new-player"),w=$("#player-toolbar"),f=e=>`#new-player #slide-${e}`,_=50,m=7,h=638,g=1024},4575:function(e,t,n){"use strict";n.r(t),n.d(t,{resolve:function(){return i}}),void 0===window._viewRestrictState&&(window._viewRestrictState={}),void 0===window._viewRestrictState.resolve&&(window._viewRestrictState.resolve=function(e){setTimeout((function(){window._viewRestrictState.resolve(e)}),0)}),void 0===window._viewRestrictState.promise&&(window._viewRestrictState.promise=new Promise(((e,t)=>window._viewRestrictState.resolve=e)));const i=window._viewRestrictState.resolve,o=window._viewRestrictState.promise;t.default=o},86544:function(e,t,n){"use strict";n.r(t);var i=n(20923);t.default=e=>{const t={from_source:e.from_source||"/",initial_view:e.initial_view||"join",slideshow_id:e.slideshow_id,slideshow_key:e.slideshow_key,device_id:"undefined"!=typeof amplitude&&amplitude.getInstance()&&amplitude.getInstance().options?amplitude.getInstance().options.deviceId:"",download:e.isDownload,content_gate:e.isContentGate},n=new FormData;for(let[e,i]of Object.entries(t))i&&n.append(e,i);(0,i.default)().then((e=>fetch("/scribd/authorize",{credentials:"same-origin",headers:{"X-CSRF-Token":e},method:"POST",body:n}).then((e=>e.json())).then((e=>{const t=document.createElement("form");t.setAttribute("action",e.url),t.setAttribute("method","POST");for(let[n,i]of Object.entries(e.params)){const e=document.createElement("input");e.setAttribute("type","hidden"),e.setAttribute("name",n),e.value=i,t.appendChild(e)}document.body.appendChild(t),t.submit()}))))}},95318:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.default=e.exports,e.exports.__esModule=!0},89994:function(e,t,n){"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.logViewRestrictionEvent=t.hideLimitOverlay=t.handleBannerNotification=t.getShouldShowReaderBlur=t.getShouldShowBannerNotificationsUX=t.CONTENT_COUNT_TO_START_RENDERING_BANNER_NOTIFICATIONS=t.ALLOWED_CONTENT_COUNT_WITHOUT_SUBSCRIPTION=void 0,t.shouldMakeAnAssignment=function(e){return e>=3},t.showLimitOverlay=void 0;var o=i(n(86544)),r=n(38268);t.ALLOWED_CONTENT_COUNT_WITHOUT_SUBSCRIPTION=5,t.CONTENT_COUNT_TO_START_RENDERING_BANNER_NOTIFICATIONS=2,t.getShouldShowBannerNotificationsUX=(e,t,n)=>({shouldShowBanner:e-t<=n,remainingDocCount:e-t}),t.getShouldShowReaderBlur=(e,t)=>t>e;const s=e=>{const t=window.slideshare_object.slideshow,n={slideshow_id:t.id,slideshow_created_at:t.created_at,slideshow_category:window.slideshare_object.gam_cat_name,slideshow_language:t.language,slideshow_format:t.type};"undefined"!=typeof amplitude&&amplitude.getInstance().logEvent(e,n)};t.logViewRestrictionEvent=e=>{const t=5===e;3===e?s("view_restriction_banner_shown"):t&&s("view_restriction_threshold_hit")};const a=()=>{const e=window.slideshare_object,t=e&&e.slideshow;(0,o.default)({from_source:`${t.ss_url}?subscription_success_banner=show`,slideshow_id:t.id,isContentGate:!0})};t.handleBannerNotification=(e,t,n)=>{if(e){const e=$(".limit-notification"),i=e.find("#notification-warning-text");return i.empty(),i.append(((e,t)=>{const n=t.utils;return e<0?n.i18n("slideshow.foundation_slideview.limit_content_without_account.notification_banner_ran_out_text"):0===e?n.i18n("slideshow.foundation_slideview.limit_content_without_account.notification_banner_last_document_text"):n.i18n("slideshow.foundation_slideview.limit_content_without_accoun.notification_banner_text",{count:e})})(t,n)),e.find("#notification-warning-link").on("click",a),void e.css("opacity",0).slideDown(400).animate({opacity:1},{queue:!1,duration:400})}},t.showLimitOverlay=()=>{const e=$(".limit-overlay");e.find("#sign-up-with-scribd").on("click",a),e.css("display",""),r.player.addClass("guest-limit")},t.hideLimitOverlay=()=>{$(".limit-overlay").css("display","none"),r.player.removeClass("guest-limit")}},66142:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIsValidIsoDate=t.default=void 0;var i=n(63911);const o="contentGateV2";t.default=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.storage=e||new a}trackView(e){this.withState((t=>{Array.isArray(t.documents)||(t.documents=[]);const n=new Date(this.storage.now().getTime()-2592e6).toISOString();t.documents=t.documents.filter(s).filter((e=>e.at>n)).filter((t=>`${t.id}`!=`${e}`)),t.documents.push({id:e,at:this.storage.now()}),this.documents=t.documents}))}get numberOfViewedDocuments(){if(!Array.isArray(this.documents))throw new Error("getting number of viewed documents before adding one");return this.documents.length}withState(e){let t=this.storage.load(o);e(t||{}),this.storage.save(o,t)}};const r=e=>!!/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z$/.test(e)&&new Date(e).toISOString()===e;function s(e){return!!(n=e.id)&&"string"==typeof n&&!!(t=e.at)&&r(t);var t,n}t.getIsValidIsoDate=r;class a{now(){return new Date}load(e){return(0,i.isLocalStorageEnabled)()?JSON.parse(window.localStorage.getItem(e)||"{}"):null}save(e,t){if(!(0,i.isLocalStorageEnabled)())return null;window.localStorage.setItem(e,JSON.stringify(t))}remove(e){(0,i.isLocalStorageEnabled)()&&window.localStorage.removeItem(e)}}},15130:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=function(e){if(!window.ab_tests)return null;const t=`${e}:`;return Object.keys(window.ab_tests).find((n=>n==e||n.startsWith(t)))}(e);return t?window.ab_tests[t]:null}},28041:function(e,t,n){"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=(0,r.default)(s);if(t)return[t];if(!e)return[null];const n=await(0,o.default)(),i=await fetch("/ab_tests/view_restriction",{method:"POST",credentials:"same-origin",headers:{"X-CSRF-Token":n}});if(i.ok){const e=await i.json();return e.amplitude_name&&a(e.amplitude_name,e.value),[e.value]}throw new Error("failed to get an assignment")};var o=i(n(20923)),r=i(n(15130));const s="view_restriction_without_subscription_v2";function a(e,t){if("undefined"!=typeof amplitude){const n=new amplitude.Identify;n.set(e,t),amplitude.getInstance().identify(n)}}},20923:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=async function(){const e=document.querySelector('meta[name="csrf-token"]');if(e)return e.getAttribute("content");if(null!==n)return n;let t=await fetch("/csrf_token",{credentials:"same-origin",method:"GET"});if(!t.ok)throw new Error(`csrf token http error: ${t.status}`);return t=await t.json(),n=t.csrf_token,n};let n=null},63911:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isLocalStorageEnabled=void 0;let n=null;t.isLocalStorageEnabled=()=>{if(null!==n)return n;try{return window.localStorage.setItem("slideshare_test","test"),window.localStorage.removeItem("slideshare_test"),n=!0,n}catch(e){return n=!1,n}}}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,n),r.exports}n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},("undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"9c58073b74026c094813d91f953dde0e0b7b48a6"},function(){"use strict";var e=n(95318),t=n(89994),i=n(4575),o=e(n(66142)),r=n(38268),s=e(n(28041)),a=n(63911);function u(e,n){if("test"!==e)return;const i=window.slideshare_object,{shouldShowBanner:o,remainingDocCount:s}=(0,t.getShouldShowBannerNotificationsUX)(t.ALLOWED_CONTENT_COUNT_WITHOUT_SUBSCRIPTION,n,t.CONTENT_COUNT_TO_START_RENDERING_BANNER_NOTIFICATIONS),a=(0,t.getShouldShowReaderBlur)(t.ALLOWED_CONTENT_COUNT_WITHOUT_SUBSCRIPTION,n);(0,t.handleBannerNotification)(o,s,i),a&&r.player.attr("data-shouldblurreader",a)}function d(e){const n=t.ALLOWED_CONTENT_COUNT_WITHOUT_SUBSCRIPTION-t.CONTENT_COUNT_TO_START_RENDERING_BANNER_NOTIFICATIONS;return e<n?"unrestricted":e>=n&&e<t.ALLOWED_CONTENT_COUNT_WITHOUT_SUBSCRIPTION?"warning":"restricted"}window.addEventListener("DOMContentLoaded",(()=>{if(!window.feature_flags.viewRestrictionWithoutSubscriptionAfterFive)return void(0,i.resolve)({state:null,counter:null});const e=window.slideshare_object,n=e&&e.slideshow;n?(0,a.isLocalStorageEnabled)()?n.view_restriction_eligible?(0,s.default)().then((e=>{let[r]=e,a=new o.default;a.trackView(n.id),(0,t.logViewRestrictionEvent)(a.numberOfViewedDocuments);const l=a.numberOfViewedDocuments;(0,t.shouldMakeAnAssignment)(l)?(0,s.default)(!0).then((e=>{let[t]=e;(0,i.resolve)({state:d(a.numberOfViewedDocuments),counter:a.numberOfViewedDocuments}),u(t,l)})):((0,i.resolve)({state:d(a.numberOfViewedDocuments),counter:a.numberOfViewedDocuments}),u(r,l))})):(0,i.resolve)({state:"unrestricted",counter:null}):(0,i.resolve)({state:"not supported",counter:null}):(0,i.resolve)({state:null,counter:null})}))}()}();
//# sourceMappingURL=content-gate.219eee1c23f855d522e2.js.map